# 一个脉冲发生器

用于功率电路双脉冲测量，可控制输出脉冲数量，总脉冲宽度，提供4个自由IO控制，提供12V用于驱动器供电。使用Type-C输入，连接带PD的适配器使用。

# 软件
## 脉冲发生核心功能

脉冲发生依靠STM32H7控制器的定时器IP实现，由于要实现单次触法输出，因此定时器的模式要设置为单脉冲模式(OPM)。在这种模式下，计数器可以在一个激励信号的触发下启动，并可在一段可编程的延时后产生一个脉宽可编程的脉冲。可参考ST的RM0433中38.3.20与38.3.21章节。

## 外部输入控制

该发生器具有三个外部输入IO，其功能分别为光标前进、光标后退与光标确认，该控制输入的数据流进入至LVGL的输入组。外部输入IO会通过LVGL的porting部分的lv_porting_indev进行输入，LVGL中会运行indev的定时任务，对输入设备的状态进行读取。该定时任务可在配置头文件中的进行更改

## UI

UI框架基于LittleVGL 8.3.6。UI使用了SquareLine Studio进行绘制，方便快捷。

<img alt="UI" width="1080" align="top" src="https://github.com/YGDL/Pulse_Generate/blob/main/Photo/UI.png">

该UI上实现了总脉冲数量的控制、总脉冲宽度的控制，通过拨动开关实现脉冲的单次产生。后四个拨动开关控制IO的输出状态，该IO可用于外部拓扑的开关控制。
